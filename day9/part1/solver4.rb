s=[*$<]*'';s=(s+?a*w=1+(s=~/$/)).tr$/,?a;p (0...w*$.).sum{|i|s[i]<[s[i-1],s[i+1],s[i+w],s[i-w]].min&&s[i].to_i+1||0}